<!DOCTYPE html>
<html>
<head>
  <title>Student Fees Management</title>
</head>
<body>
  <h1>Student Fees</h1>
  <div id="admin">
    <h2>Admin: Add Payment</h2>
    <input id="student_id" placeholder="Student ID" />
    <input id="amount" type="number" placeholder="Amount" />
    <button onclick="addPayment()">Add Payment</button>
  </div>
  <div id="student">
    <h2>Student: Check Fees</h2>
    <input id="check_id" placeholder="Your Student ID" />
    <button onclick="checkFees()">Check</button>
    <p id="result"></p>
  </div>
  <script>
    async function addPayment() {
      const student_id = document.getElementById('student_id').value;
      const amount = document.getElementById('amount').value;
      await fetch('/api/payments', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ student_id, amount, payment_date: new Date().toISOString().split('T')[0] })
      });
      alert('Payment added');
    }
    async function checkFees() {
      const student_id = document.getElementById('check_id').value;
      const res = await fetch(`/api/students/${student_id}`);
      const data = await res.json();
      document.getElementById('result').innerHTML = `Total: $${data.total}, Paid: $${data.paid}, Outstanding: $${data.outstanding}`;
    }
  </script>
</body>
</html>